<?php

require_once('app/helpers/functions.php');
require_once('app/config/path_names.php');
require_once('app/config/db_connection.php');
require_once('vendor/autoload.php');

use Frame\Configuration\Database;

$db = Database::singleton();

$old_entries = [
    [4,'GF824JP,DE184XR','01-12-2022','31-12-2022'],
    [4,'FY925VN,GK443NX,GD617FG','01-12-2022','31-12-2022'],
    [4,'CT084RC,DG57141','01-12-2022','31-12-2022'],
    [4,'FK303JN','01-12-2022','31-12-2022'], // TOM
    [4,'FP824XF,EY005ZR,GA061RC,GD559JA,FG945LE,ET755JL,EY555AS','19-12-2022','31-12-2022'],
    [4,'GF824JP','19-12-2022','31-12-2022'],
    [4,'DN805HD','19-12-2022','31-12-2022'],
    [4,'FT848JB','19-12-2022','31-12-2022'],
    [4,'GJ553RN','19-12-2022','31-12-2022'],
    [4,'GG708DH','19-12-2022','31-12-2022'],
    [4,'FB060DB,EW440CJ,FS928JH','19-12-2022','31-12-2022'],
    [4,'FB266WD,EP491CE','19-12-2022','31-12-2022'],
    [3,'GE601LP','19-12-2022','31-12-2022'],
    [3,'FJ223VY,DR517HH,EL366PA,DE262HR,FS600CN,EV994PL,GC845YE,EH966RB','19-12-2022','31-12-2022'],
    [2,'EV477CB,FX226PA','19-12-2022','31-12-2022'],
    [2,'DA840CB','19-12-2022','31-12-2022'],
    [2,'EK925BF,FV958JV','19-12-2022','31-12-2022'],
    [2,'EL660AA','19-12-2022','31-12-2022'],
    [2,'EY746VY','19-12-2022','31-12-2022'],
    [2,'FR604JZ','19-12-2022','31-12-2022'],
    [2,'AZ514AT,GE619GK,CX729VW,BS636GB','19-12-2022','31-12-2022'],
    [2,'CF256AZ,DP285CL','19-12-2022','31-12-2022'],
    [4,'DL701TK','26-12-2022','31-12-2022'],
    [4,'FK303JN','26-12-2022','07-01-2023'],
    [3,'FN364NP','26-12-2022','31-12-2022'],
    [2,'FY670BB','26-12-2022','07-01-2023'],
    [2,'GK328YK','26-12-2022','31-12-2022'],
    [2,'GF311JJ','26-12-2022','31-12-2022'],
    [2,'GA253RC','26-12-2022','07-01-2023'],
    [4,'EW440CJ','26-12-2022','31-12-2022'],
    [2,'GA986RA','26-12-2022','07-01-2023'],
    [1,'FK946SF','26-12-2022','07-01-2023'],
    [2,'EL926AB','26-12-2022','07-01-2023'],
    [2,'GC118BA','26-12-2022','31-12-2022'],
    [3,'FR945AF,FB294TT','26-12-2022','07-01-2023'],
    [2,'FV671ZZ','26-12-2022','07-01-2023'],
    [2,'FE772EB','26-12-2022','31-12-2022'],
    [2,'DP253BK','26-12-2022','31-12-2022'],
    [2,'GC335EZ','26-12-2022','07-01-2023'],
    [2,'EK174MX','26-12-2022','31-12-2022'],
    [2,'EP211ZL','26-12-2022','31-12-2022'],
    [3,'FH778DW FH842VG','26-12-2022','31-12-2022'],
    [4,'FK303JN','01-01-2023','31-01-2023'],
    [2,'EK982DB,FS367MZ','26-12-2022','07-01-2023'],
    [2,'EF783SK','26-12-2022','31-12-2022'],
    [2,'DP275DC','26-12-2022','31-12-2022'],
    [2,'GK016WC','26-12-2022','31-12-2022'],
    [2,'FZ385NJ','26-12-2022','31-12-2022'],
    [2,'FF008KZ','26-12-2022','31-12-2022'],
    [2,'DR156GZ','26-12-2022','31-12-2022'],
    [2,'GD402SD','26-12-2022','07-01-2023'],
    [4,'FC263ED,GL518ZN','01-01-2023','31-01-2023'],
    [2,'FY405VN','26-12-2022','31-12-2022'],
    [3,'EZ885WM','02-01-2023','14-01-2023'],
    [4,'DN805HD','02-01-2023','14-01-2023'],
    [4,'FT848JB','02-01-2023','14-01-2023'],
    [4,'GF824JP','02-01-2023','14-01-2023'],
    [4,'GG708DH','02-01-2023','14-01-2023'],
    [4,'FB266WD','02-01-2023','14-01-2023'],
    [4,'EW440CJ','02-01-2023','14-01-2023'],
    [2,'EB764RG','02-01-2023','07-01-2023'],
    [3,'FN364NP','02-01-2023','07-01-2023'],
    [4,'CT084RC,GJ217AV,DG57141','01-01-2023','31-01-2023'],
];

$oldImport = $db->prepare(
    "INSERT INTO old_subscriptions (park_id,plate,entry_date,exit_date)
    VALUES (:park_id,:plate,:entry_date,:exit_date)"
);
foreach($old_entries as $index => $old) {

    $explode_entry = \explode('-',$old[2]);
    $old[2] = "$explode_entry[2]-$explode_entry[1]-$explode_entry[0]";

    $explode_exit = \explode('-',$old[3]);
    $old[3] = "$explode_exit[2]-$explode_exit[1]-$explode_exit[0]";

    $oldImport->execute([
        ':park_id' => $old[0],
        ':plate' => $old[1],
        ':entry_date' => $old[2],
        ':exit_date' => $old[3]
    ]);
}



